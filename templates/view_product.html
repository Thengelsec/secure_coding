{% extends "base.html" %}
{% block title %}ìƒí’ˆ ìƒì„¸ë³´ê¸°{% endblock %}
{% block content %}
<h2>{{ product.title }}</h2>
<p>{{ product.description }}</p>
<p>ìƒí’ˆ ID: <code>{{ product.id }}</code></p>
<p>ê°€ê²©: {{ product.price|comma }}ì›</p>
<p>íŒë§¤ì: <a href="{{ url_for('view_user_profile', user_id=seller.id) }}">{{ seller.username }}</a></p>
<p>Debug â†’ is_admin={{ is_admin }}, reports ê°œìˆ˜={{ reports|length }}</p>
<p>reports raw: <pre>{{ reports }}</pre></p>

{% if user and (user['is_admin'] == 1 or user['id'] == product.seller_id) %}
  <form method="post" action="{{ url_for('delete_product', product_id=product.id) }}">
    <button type="submit" onclick="return confirm('ìƒí’ˆì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ìƒí’ˆ ì‚­ì œ</button>
  </form>
{% endif %}

{% if user and user['is_admin'] == 1 and reports %}
  <h4>ğŸ“¢ ì‹ ê³  ë‚´ì—­</h4>
  <ul>
    {% for r in reports %}
      <li>
        <strong>ì‹ ê³ ì:</strong> {{ r['username'] }}<br>
        <strong>ì‚¬ìœ :</strong> {{ r['reason'] }}<br>
        <form action="{{ url_for('delete_report', report_id=r['id']) }}" method="post">
          <button type="submit">ì‚­ì œ</button>
        </form>
      </li>
    {% endfor %}
  </ul>
{% endif %}

{% endblock %}
